<app-header></app-header>
<app-navbar></app-navbar>

<div class="content">

    <div id="board-content-container">
        <div class="board-headline-menu">
            <div class="board-headline">
                <h1>Board</h1>
                <div onclick="openAddTaskPopup('todo')" class="board-addTask-control control-mobile">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M8.66602 11.3327H0.666016V8.66602H8.66602V0.666016H11.3327V8.66602H19.3327V11.3327H11.3327V19.3327H8.66602V11.3327Z"
                            fill="white" />
                    </svg>
                </div>
            </div>

            <div class="board-controller">
                <div class="board-search">
                    <input id="board-search" onkeyup="findTask()" onblur="clearOutlineBlue('board-search')"
                        onfocus="setOutlineBlue('board-search')" type="text" placeholder="Find Task" />
                    <div class="board-search-btn-frame">
                        <div class="board-round-btn-frame">
                            <img class="addTask-arrow-btn" src="../../../assets/img/search.svg" alt="" />
                        </div>
                    </div>
                </div>
                <button onclick="openAddTaskPopup('todo')" class="board-btn-addTask">
                    Add Task
                    <svg width="18" height="18" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M8.66602 11.3327H0.666016V8.66602H8.66602V0.666016H11.3327V8.66602H19.3327V11.3327H11.3327V19.3327H8.66602V11.3327Z"
                            fill="white" />
                    </svg>
                </button>
            </div>
        </div>

        <div id="board-column" class="board-column-container">
            <!-- TODO -->
            <div id="column-todo" class="board-column">
                <div class="board-column-header">
                    <p class="board-colum-headline">todo</p>
                    <div onclick="openAddTaskPopup('todo')" class="board-addTask-control">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M8.66602 11.3327H0.666016V8.66602H8.66602V0.666016H11.3327V8.66602H19.3327V11.3327H11.3327V19.3327H8.66602V11.3327Z"
                                fill="#2A3647" />
                        </svg>
                    </div>
                </div>

                <div id="todo-card-container" class="card-container" ondragstart="avoidGhostCard(event)"
                    ondrop="drop(event)" ondragover="allowDrop(event), showGhostcard();">

                    @for (task of localUser.tasks; track task; let index = $index) {
                    @if (task.status === 'toDo') {<app-board-card (clicked)="openDialog(index)" [task]="task"></app-board-card>}
                    }

                    <div class="board-column-noTask d-none">No Tasks To Do</div>

                </div>
            </div>
            <!-- inProgress -->
            <div id="column-inProgress" class="board-column">
                <div class="board-column-header">
                    <p class="board-colum-headline">in progress</p>
                    <div onclick="openAddTaskPopup('inProgress')" class="board-addTask-control">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M8.66602 11.3327H0.666016V8.66602H8.66602V0.666016H11.3327V8.66602H19.3327V11.3327H11.3327V19.3327H8.66602V11.3327Z"
                                fill="#2A3647" />
                        </svg>
                    </div>
                </div>

                <div id="inProgress-card-container" class="card-container" ondragstart="avoidGhostCard(event)"
                    ondrop="drop(event)" ondragover="allowDrop(event), showGhostcard()">
                    @for (task of localUser.tasks; track task; let index = $index) {
                    @if (task.status === 'inProgress') {<app-board-card (clicked)="openDialog(index)" [task]="task"></app-board-card>}
                    }
                    <div class="board-column-noTask">No Tasks in Progress</div>
                </div>
            </div>
            <!-- await Feedback -->
            <div id="column-awaitFeedback" class="board-column">
                <div class="board-column-header">
                    <p class="board-colum-headline">Await feedback</p>
                    <div onclick="openAddTaskPopup('awaitFeedback')" class="board-addTask-control">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M8.66602 11.3327H0.666016V8.66602H8.66602V0.666016H11.3327V8.66602H19.3327V11.3327H11.3327V19.3327H8.66602V11.3327Z"
                                fill="#2A3647" />
                        </svg>
                    </div>
                </div>

                <div id="awaitFeedback-card-container" class="card-container" ondragstart="avoidGhostCard(event)"
                    ondrop="drop(event)" ondragover="allowDrop(event), showGhostcard();">
                    @for (task of localUser.tasks; track task; let index = $index) {
                        @if (task.status === 'awaitFeedback') {<app-board-card (clicked)="openDialog(index)" [task]="task"></app-board-card>}
                        }
                    <div class="board-column-noTask">No Tasks await Feedback</div>
                </div>
            </div>
            <!-- done -->
            <div id="column-done" class="board-column">
                <div class="board-column-header">
                    <p class="board-colum-headline">Done</p>
                </div>

                <div id="done-card-container" class="card-container" ondragstart="avoidGhostCard(event)"
                    ondrop="drop(event)" ondragover="allowDrop(event), showGhostcard();">
                    @for (task of localUser.tasks; track task; let index = $index) {
                        @if (task.status === 'done') {<app-board-card (clicked)="openDialog(index)" [task]="task"></app-board-card>}
                        }
                    <div class="board-column-noTask">No Tasks done</div>
                </div>
            </div>
        </div>
    </div>
</div>